---
"Check if index exists and created with remote_store=true":
  - skip:
      version: " - 2.99.99"
      reason: "remote store restore API only supported since 3.0.0"

  - do:
      indices.create:
        index: "index1"
        body:
          settings:
            number_of_shards:   1
            number_of_replicas: 2

  - do:
      remote_store.restore:
        body:
          indices: "index1,index2"

  - match: { remote_store.indices:  []}
  - match: { remote_store.shards.total: 0 }
  - match: { remote_store.shards.successful: 0 }
  - match: { remote_store.shards.failed : 0 }
---
"Error no indices":
  - skip:
      version: " - 2.99.99"
      reason: "remote store restore API only supported since 3.0.0"

  - do:
      catch: bad_request
      remote_store.restore:
        body:
          indices: ""

  - match: { status: 400 }
  - match: { error.type:  action_request_validation_exception}
  - match: { error.reason:  "Validation Failed: 1: indices are missing;"}
